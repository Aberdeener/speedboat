{% extends "base.html" %}
{% block body %}
<div class="row">
  <div class="col-lg-12">
    <h1 class="page-header">{{ guild.name }} - {{ guild.guild_id }}<h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">
        Messages
      </div>
      <div class="panel-body">
        <div id="messages-graph"></div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>

d3.json("/guilds/{{ guild.guild_id }}/stats", function (data) {
  var messagesData = $.map(data.messages, function (obj) {
    return {date: new Date(obj.date * 1000), value: obj.value};
  });

  MG.data_graphic({
    title: "Messages",
    data: messagesData,
    interpolate: d3.curveLinear,
    missing_is_zero: true,
    width: $("#messages-graph").width(),
    height: 450,
    target: "#messages-graph",
    x_accessor: 'date',
    y_accessor: 'value'
  });
});

</script>
{% endblock %}
